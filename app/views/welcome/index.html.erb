<div class="container">
  <div class="row page-header">
    <h1>San Francisco Film Calendar</h1>
  </div>
</div>

<h2>Most Popular Screenings</h2>

<!-- buzz-box -->
<div class="row buzz-box  clearfix">
  <div class="col-xs-12">

    <ul class="thumbnails clearfix">

      <%@top_three_films_arr.each do |film_obj|%>

      <li class="col-xs-4 col-sm-3 col-md-2">
        <div class="thumbnail clearfix">
          <a href="#">
            <img src="<%=film_obj.poster_url%>" alt="">
            <div class="overlay">
              <h2><%=film_obj.title%></h2>
            </div>
          </a>

        </div>
      </li>

      <%end%>

      <li class="hidden-xs col-sm-3 col-md-2 ">
        <div class="thumbnail">
          <a href="#"><img src="<%=@fourth_top_film.poster_url%>" alt="">
            <div class="overlay">
              <h2><%=@fourth_top_film.title%></h2>
            </div>
          </a>
        </div>
      </li>

      <% @fifth_and_sixth_top_films_arr.each do |film_obj| %>
      <li class="hidden-xs hidden-sm col-md-2 ">
        <div class="thumbnail">
          <a href="#"><img src="<%=film_obj.poster_url%>" alt="">
            <div class="overlay">
              <h2><%=film_obj.title%></h2>
            </div>
          </a>
        </div>
      </li>

      <%end%>

    </ul>

  </div>
</div>
<!-- /buzz-box -->


<div class="container">
  <% end_month = @date_filler.month + 2%>
  <% until @date_filler.month == end_month%>
  <% @date_filler = set_start_date(@date_filler) %>
  <div class="row">
    <div class="panel panel-default">
      <!-- Default panel contents -->
      <div class="panel-heading"><%= Date::MONTHNAMES[@date_filler.month] %></div>

      <!-- Calendar -->
      <div id="no-more-tables">
        <table class="table table-bordered col-sm-12 table-condensed cf" id="<%= Date::MONTHNAMES[@date_filler.month] %>">
          <thead class="cf">
            <tr>
              <th>sunday</th>
              <th>monday</th>
              <th>tuesday</th>
              <th>wednesday</th>
              <th>thursday</th>
              <th>friday</th>
              <th>saturday</th>
            </tr>
          </thead>
          <tbody>
            <% next_month = @date_filler.month + 1 %>
            <% until @date_filler.month == next_month %>
            <tr>
              <% 7.times do %>
              <td data-title="<%=@date_filler.strftime("%A, %B %-d")%>"
                class="clearfix date-box" id="td-<%=@date_filler.strftime("%-m-%-d-%Y")%>">
                <span class='date hidden-xs'><%=@date_filler.mday%></span>
                <% if (films_today?(@date_filler)) %>

                  <% films_today(@date_filler).each do |film| %>
                    <br>
                    <span class='film-title'>
                      <%= film.title %>
                    </span>
                    <br>

                    <% screenings_today(film, @date_filler).each do |screening| %>
                      <a href="<%= screening.ticketing_url %>">
                        <span class='showtime'><%= screening.time %></span>
                      </a>
                    <% end %>

                    <br>
                    <span class='theater-name'>
                      <%= theater_name(film, @date_filler) %>
                    </span>
                  <% end %>

                <% else %>
                  <br><span class='placeholder hidden-sm hidden-md hidden-lg hidden-xl'>no screenings</span>
                <% end %>

              </td>
              <% @date_filler += 1 %>
              <% end %>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>

    </div>
  </div>
  <% end %>
</div>